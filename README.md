# Сервер сайд для личного кабинета ЛК Энегргосбыт
## Установка для разработки
Клонируем репозиторий
```
git clone https://github.com/tugaserya/LK-company.git
cd LK-company
```
Установка зависимостей
```
npm i
```
## Запуск
Для разработки
```
npm run dev
```
Обычный запуск
```
npm start
```

## API

### Users
``/user/login/:login/:password`` - Авторизация пользователя. Принимает GET запрос, возвращает 200 статус.(Тут должен быть JWT, но его пришлось терминировать)
В параметрах принимает логин и пароль пользователя.
Пометка - в проекте условились, что пользователь = организация.

### Договоры
``/contract/get/:userId`` - Принимет GET запрос, возвращает 200 статус со списком договоров пользвателя.
В параметрах принимает id пользователя.

``/contract/get/contract_card/:contractId`` - Принимает GET запрос, возвращает 200 статус с карточкой выбранного договора.
В параметрах принимает id договора.

``/contract/get/organisation_card/:userId`` - Принимает GET запрос, возвращает 200 статус с карточкой организации.
В параметрах принимает id пользователя.

### Точки учета
``/metering-points/get/all_points/:contractId`` - Принимает GET запрос, возвращает статус 200 со всеми точками учета привязанным к выбранному договору.
В параметрах принимает id договора.

``/metering-points/get/point/:contractId/:pointId`` - Принимает GET запрос, возвращает статус 200 и точку учета привязанную к выбранному договору.
В параметрах принимает id договора и id точки учета.

``/metering-points/get/point_parameters/:pointId`` - Принимает GET запрос, возвращает статус 200 со всей ифнормацией о точке учета привязанной к выбранному договору.
В параметрах принимает id точки учета.

### Показания
``/reading/get/readings/:userId/:contractId`` - Принимает GET запрос, возвращает статус 200 со списком показаний по всем точкам учета привязанным к выбранному договору.
В параметрах принимает id пользователя и id договора.

``/reading/reading_value`` - Принимает PUT запрос, возвращает статус 200 с значением из тела запроса.
В теле запроса принимает id показания, значение расхода(число). - {readingId, readingValue}

## P.S
Ты если залетный, прости за старье хотели все переписать на Nest блатной, но не срослось.
Если ты вдург тут писать что-то будешь, то тестов нет и не планировалось. Сам сидел как слепой крот.
